import{r as n,j as e,a as P,u as R,F as B,f as he,L,b as ee,c as se,d as ae,e as pe,g as fe,h as re,i as xe,k as ge,l as be,m as je,n as ve,o as Ne,p as we,O as te,q as oe,s as Z,t as ye,v as Ee,w as Ce,x as Se,y as H,z as ke,N as ne,B as qe,R as Ae,A as U,C as De}from"./vendor-Do1lUxYm.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))u(c);new MutationObserver(c=>{for(const l of c)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&u(i)}).observe(document,{childList:!0,subtree:!0});function h(c){const l={};return c.integrity&&(l.integrity=c.integrity),c.referrerPolicy&&(l.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?l.credentials="include":c.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function u(c){if(c.ep)return;c.ep=!0;const l=h(c);fetch(c.href,l)}})();const ie=n.createContext(),ze=({children:s})=>{const[r,h]=n.useState([]),u=async()=>{try{const t=await P.get("https://backend-mywf.onrender.com/api/festividad/festividades");h(t.data)}catch(a){console.error("❌ Error al listar los eventos:",a),setTimeout(()=>u(),5e3)}},c=async a=>{try{const t=`https://backend-mywf.onrender.com/api/festividad/detalle/${a}`;return(await P.get(t)).data}catch(t){throw console.error("❌ Error al obtener detalle del evento:",t),t}},l=async a=>{try{const t=localStorage.getItem("token"),d="https://backend-mywf.onrender.com/api/festividad/crear",g={headers:{Authorization:`Bearer ${t}`}};return(await P.post(d,a,g)).data}catch(t){throw console.error("❌ Error al crear el evento:",t),t}},i=async(a,t)=>{try{const d=localStorage.getItem("token"),g=`https://backend-mywf.onrender.com/api/festividad/actualizar/${a}`,E={headers:{Authorization:`Bearer ${d}`}};return(await P.put(g,t,E)).data}catch(d){throw console.error("❌ Error al actualizar el evento:",d),d}},f=async a=>{try{const t=localStorage.getItem("token"),d=`https://backend-mywf.onrender.com/api/festividad/eliminar/${a}`,g={headers:{Authorization:`Bearer ${t}`}};return(await P.delete(d,g)).data}catch(t){throw console.error("❌ Error al eliminar el evento:",t),t}},o=async a=>{try{const t=`https://backend-mywf.onrender.com/api/festividad/festividades-por-mes/${a}`;return(await P.get(t)).data}catch(t){throw console.error("❌ Error al listar eventos por mes:",t),t}};return n.useEffect(()=>{u()},[]),e.jsx(ie.Provider,{value:{eventos:r,listarEventos:u,obtenerDetalleEvento:c,crearEvento:l,actualizarEvento:i,eliminarEvento:f,listarEventosPorMes:o},children:s})},$e=({toggleSidebar:s})=>{const[r,h]=n.useState(!1),[u,c]=n.useState(null),[l,i]=n.useState(!1),[f,o]=n.useState(null),[a,t]=n.useState([]),{listarEventosPorMes:d}=n.useContext(ie),g=R();n.useEffect(()=>{const j=localStorage.getItem("token"),q=localStorage.getItem("tipoUsuario");h(!!j),c(q)},[]);const E=()=>{localStorage.removeItem("token"),localStorage.removeItem("tipoUsuario"),h(!1),c(null),g("/"),window.location.reload()},p=async j=>{o(j);try{const q=await d(j);t(q[j]||[])}catch(q){console.error("Error al obtener festividades del mes:",q)}},m=()=>{o(null),t([])},b=()=>{i(!l)},x=j=>{g(`/searches?month=${j}`)};return e.jsxs("nav",{className:"navbar px-4",children:[e.jsx("button",{className:"menu-btn",onClick:s,children:e.jsx(B,{icon:he})}),e.jsxs(L,{to:"/",className:"navbar-logo",children:[e.jsx("img",{src:"/logo.png",alt:"Logo"}),e.jsx("span",{className:"navbar-title",children:"Megadisfraz"})]}),e.jsx("ul",{className:"navbar-meses",children:["| Enero |","| Febrero |","| Marzo |","| Abril |","| Mayo |","| Junio |","| Julio |","| Agosto| ","| Septiembre| ","| Octubre |","| Noviembre |","| Diciembre |"].map((j,q)=>e.jsxs("li",{className:"nav-item",onMouseEnter:()=>p(j),onMouseLeave:m,children:[e.jsx("button",{className:"nav-link",onClick:()=>x(j),children:j}),f===j&&a.length>0&&e.jsx("ul",{className:"event-dropdown",children:a.map(C=>e.jsxs("li",{className:"event-item",onClick:()=>g(`/searches?event=${encodeURIComponent(C.nombre)}`),children:[C.nombre," - ",C.dia]},C.id))})]},q))}),e.jsx("div",{className:"navbar-auth",children:r?e.jsxs(e.Fragment,{children:[e.jsx(L,{to:"/perfil",className:"icon-btn profile-icon",title:"Perfil",children:e.jsx(B,{icon:se})}),e.jsx("button",{className:"icon-btn logout-icon",onClick:E,title:"Cerrar Sesión",children:e.jsx(B,{icon:ae})}),(u==="admin"||u==="moderador")&&e.jsxs("div",{className:"admin-menu-container",children:[e.jsxs("button",{className:"icon-btn admin-icon",onClick:b,title:"Administrador",children:[e.jsx(B,{icon:pe})," ",e.jsx(B,{icon:fe})]}),l&&e.jsxs("div",{className:"admin-menu",children:[u==="admin"&&e.jsx(L,{to:"/administradores",className:"admin-menu-item",children:"Administradores"}),e.jsx(L,{to:"/eventos",className:"admin-menu-item",children:"Eventos"}),e.jsx(L,{to:"/disfraces",className:"admin-menu-item",children:"Disfraces"}),e.jsx(L,{to:"/etiquetas",className:"admin-menu-item",children:"Etiquetas"})]})]})]}):e.jsx(L,{to:"/login",className:"icon-btn login-icon",title:"Iniciar Sesión",children:e.jsx(B,{icon:ee})})})]})},J=n.createContext(),Ie=({children:s})=>{const[r,h]=n.useState([]),u=async()=>{try{const t=await P.get("https://backend-mywf.onrender.com/api/disfraz/listar");h(t.data)}catch(a){console.error("❌ Error al listar los disfraces:",a),setTimeout(()=>u(),5e3)}},c=async a=>{try{const t=`https://backend-mywf.onrender.com/api/disfraz/detalle/${a}`;return(await P.get(t)).data}catch(t){throw console.error("❌ Error al obtener detalle del disfraz:",t),t}},l=async a=>{try{const t=localStorage.getItem("token"),d="https://backend-mywf.onrender.com/api/disfraz/registro",g={headers:{Authorization:`Bearer ${t}`}};return(await P.post(d,a,g)).data}catch(t){throw console.error("❌ Error al registrar disfraz:",t),t}},i=async(a,t)=>{try{const d=localStorage.getItem("token"),g=`https://backend-mywf.onrender.com/api/disfraz/actualizar/${a}`,E={headers:{Authorization:`Bearer ${d}`}};return(await P.put(g,t,E)).data}catch(d){throw console.error("❌ Error al actualizar el disfraz:",d),d}},f=async a=>{try{const t=localStorage.getItem("token"),d=`https://backend-mywf.onrender.com/api/disfraz/eliminar/${a}`,g={headers:{Authorization:`Bearer ${t}`}};return(await P.delete(d,g)).data}catch(t){throw console.error("❌ Error al eliminar el disfraz:",t),t}},o=a=>r.filter(t=>t.categoria===a);return n.useEffect(()=>{u()},[]),e.jsx(J.Provider,{value:{disfraces:r,setDisfraces:h,listarDisfraces:u,obtenerDetalleDisfraz:c,registrarDisfraz:l,actualizarDisfraz:i,eliminarDisfraz:f,filtrarDisfracesPorCategoria:o},children:s})},K=[{label:"1ra Sucursal: YARUQUI CENTRO",src:"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d249.3626477649494!2d-78.31752496658034!3d-0.16204089881778425!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x91d593004a7fa75f%3A0x5eea80851419080a!2sMegadisfraz!5e0!3m2!1ses-419!2sec!4v1740273750468!5m2!1ses-419!2sec"},{label:"2da Sucursal: CAYAMBE CENTRO",src:"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d296.54494697342307!2d-78.14407258761588!3d0.04045211760451157!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x8e2a08f745888e7b%3A0x836a42c1eea0bfb1!2sCentro%20Comercial%20de%20Vendedores%20Aut%C3%B3nomos!5e0!3m2!1ses-419!2sec!4v1740273826714!5m2!1ses-419!2sec"},{label:"3ra Sucursal: YARUQUI - UPC",src:"https://www.google.com/maps/embed?pb=!1m14!1m12!1m3!1d249.36266087396976!2d-78.3181939994935!3d-0.16097235436319585!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!5e0!3m2!1ses-419!2sec"}],Fe=({sidebarOpen:s,toggleSidebar:r})=>{const[h,u]=n.useState(K[0].src),[c,l]=n.useState([]),[i,f]=n.useState(""),o=R(),a=re(),{disfraces:t}=n.useContext(J);localStorage.getItem("tipoUsuario"),n.useEffect(()=>{(async()=>{try{const p=await fetch("https://backend-mywf.onrender.com/api/etiqueta/listar",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!p.ok)throw new Error("Error al obtener las etiquetas");const m=await p.json();l(m)}catch(p){console.error("Error al cargar las etiquetas:",p)}})()},[]);const d=E=>{const p=new URLSearchParams(a.search);p.set("etiqueta",E),o(`/searches?${p.toString()}`),r()},g=()=>{i.trim()&&t.filter(p=>p.nombre.toLowerCase().includes(i.toLowerCase())||p.descripcion.toLowerCase().includes(i.toLowerCase())).length>0&&(o(`/searches?query=${i}`),r())};return n.useEffect(()=>(s?document.body.classList.add("sidebar-open"):document.body.classList.remove("sidebar-open"),()=>document.body.classList.remove("sidebar-open")),[s]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`overlay ${s?"active":""}`,onClick:r}),e.jsxs("aside",{className:`sidebar ${s?"active":""}`,children:[e.jsxs("div",{className:"sidebar-top",children:[e.jsx("button",{className:"close-btn",onClick:r,children:e.jsx(B,{icon:xe})}),e.jsx("div",{className:"sidebar-auth-icons",children:localStorage.getItem("token")?e.jsxs(e.Fragment,{children:[e.jsx(L,{to:"/perfil",className:"icon-btn profile-icon",title:"Perfil",children:e.jsx(B,{icon:se})}),e.jsx("button",{className:"icon-btn logout-icon",title:"Cerrar Sesión",onClick:()=>{localStorage.clear(),window.location.reload()},children:e.jsx(B,{icon:ae})})]}):e.jsx(L,{to:"/login",className:"icon-btn login-icon",title:"Iniciar Sesión",children:e.jsx(B,{icon:ee})})})]}),e.jsxs("div",{className:"search-container",children:[e.jsx("input",{type:"text",placeholder:"Buscar",value:i,onChange:E=>f(E.target.value),onKeyDown:E=>{E.key==="Enter"&&(E.preventDefault(),g())},className:"search-input"}),e.jsx("button",{className:"search-btn",onClick:g,children:e.jsx(B,{icon:ge})})]}),e.jsx("h2",{className:"sidebar-title",children:"Etiquetas"}),e.jsx("div",{className:"tags-container",children:c.map(E=>e.jsx("button",{className:"tag-button",onClick:()=>d(E.nombre),children:E.nombre},E.id))}),e.jsx("h2",{className:"sidebar-title",children:"Mapa Sucursales"}),e.jsxs("div",{className:"map-container",children:[e.jsx(B,{icon:be,className:"map-icon"}),e.jsx("iframe",{title:"mapa-sucursales",src:h,width:"100%",height:"150",style:{border:0},allowFullScreen:!0,loading:"lazy",referrerPolicy:"no-referrer-when-downgrade"})]}),e.jsx("ul",{className:"sucursales-list",children:K.map((E,p)=>e.jsx("li",{onClick:()=>u(E.src),children:E.label},p))})]})]})},Me=()=>e.jsxs("footer",{className:"footer",children:[e.jsxs("div",{className:"social-icons",children:[e.jsx("a",{href:"https://www.instagram.com/megadisfraz_yaruqui?igsh=dHJwd3hmaHU2aTNq",children:e.jsx(je,{})}),e.jsx("a",{href:"https://x.com/Megadisfraz?t=IxW60maTBR2FoOO_RNDDeQ&s=09",children:e.jsx(ve,{})}),e.jsx("a",{href:"https://www.tiktok.com/@megadisfraz_yaruqui?_t=ZM-8wGmbrvw46Y&_r=1",children:e.jsx(Ne,{})})]}),e.jsxs("ul",{className:"footer-links",children:[e.jsx("li",{children:e.jsx("a",{href:"#",children:"Home"})}),e.jsx("li",{children:e.jsx("a",{href:"#",children:"News"})}),e.jsx("li",{children:e.jsxs("a",{href:"https://wa.me/593939232766",children:[e.jsx(we,{}),"Whatsapp."]})}),e.jsx("li",{children:e.jsx("a",{href:"webmegadisfraz513@gmail.com",children:"Gmail."})})]}),e.jsx("p",{className:"footer-text",children:"© 2025 Megadisfraz"})]}),Pe=()=>{const[s,r]=n.useState(!1),h=()=>{r(!s)};return e.jsxs("div",{className:"parent",children:[e.jsxs("div",{className:"div1",children:[" ",e.jsx($e,{toggleSidebar:h})]}),e.jsx(Fe,{sidebarOpen:s,toggleSidebar:h}),e.jsxs("div",{className:"div3",children:[e.jsx(te,{})," "]}),e.jsxs("div",{className:"div4",children:[" ",e.jsx(Me,{})]})]})},le=n.createContext(),Le=({children:s})=>{const[r,h]=n.useState({}),u=async i=>{try{const o="https://backend-mywf.onrender.com/api",a=localStorage.getItem("tipoUsuario");if(!a)throw new Error("Tipo de usuario no definido");const t=`${o}/admin/perfil`,d={headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`}},g=await P.get(t,d);return h({usuario:g.data,rol:a}),g.data}catch(o){throw console.error("❌ Error al obtener el perfil:",o),o}},c=async(i,f)=>{try{const o=localStorage.getItem("token"),t=localStorage.getItem("tipoUsuario")==="admin"?`https://backend-mywf.onrender.com/api/admin/actualizar/${i}`:`https://backend-mywf.onrender.com/api/usuario/actualizar/${i}`,d={headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`}},g=await P.put(t,f,d);return h(g.data),g.data}catch(o){throw console.error("❌ Error al actualizar el perfil:",o),o}},l=async i=>{try{const f=localStorage.getItem("token"),a=localStorage.getItem("tipoUsuario")==="admin"?"https://backend-mywf.onrender.com/api/admin/actualizar-password":"https://backend-mywf.onrender.com/api/usuario/actualizar-password",t={headers:{"Content-Type":"application/json",Authorization:`Bearer ${f}`}};return(await P.put(a,i,t)).data}catch(f){throw console.error("❌ Error al actualizar la contraseña:",f),f}};return n.useEffect(()=>{const i=localStorage.getItem("token");i&&u(i)},[]),e.jsx(le.Provider,{value:{auth:r,setAuth:h,obtenerPerfil:u,actualizarPerfil:c,actualizarPassword:l},children:s})};function Y({className:s,children:r,...h}){return e.jsx("div",{className:oe("bg-white rounded-xl shadow-lg overflow-hidden h-full transform transition-transform hover:scale-105",s),style:{border:"1px solid #ccc",boxShadow:"0 4px 8px rgba(10, 10, 10, 0.78)",transition:"transform 0.3s ease"},...h,children:r})}function W({className:s,children:r,...h}){return e.jsx("div",{className:oe("p-4 h-full",s),...h,children:r})}function Ue(){const s=R(),{disfraces:r=[]}=n.useContext(J),h=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],u=h[new Date().getMonth()],c=a=>{const t=[...h],d=t.indexOf(u),g=[...t.slice(d),...t.slice(0,d)].reverse();return[...a].sort((E,p)=>{if(!E.festividades||!p.festividades)return 0;const m=b=>{let x=-1;return b.festividades.forEach(j=>{const q=g.indexOf(j.mes);q>x&&(x=q)}),x};return m(p)-m(E)})},l=a=>[...a].sort((t,d)=>{if(!t.festividades||!d.festividades)return 0;const g=E=>{const p=E.festividades.filter(m=>m.mes===u);return p.length===0?1/0:Math.min(...p.map(m=>m.dia))};return g(t)-g(d)}),i=r.length>0?l(r.filter(a=>a.festividades&&a.festividades.some(t=>t.mes===u))):[],f=c(r),o=a=>{s(`/productos/${a.id}`)};return e.jsxs("div",{className:"store-container",children:[e.jsx("section",{className:"carousel-section",style:{maxWidth:"80%",margin:"auto"},children:e.jsxs("div",{id:"carouselExampleIndicators",className:"carousel slide","data-bs-ride":"carousel",children:[e.jsx("div",{className:"carousel-indicators",children:r.map((a,t)=>e.jsx("button",{type:"button","data-bs-target":"#carouselExampleIndicators","data-bs-slide-to":t,className:t===0?"active":"","aria-current":t===0?"true":"false","aria-label":`Slide ${t+1}`},t))}),e.jsx("div",{className:"carousel-inner",children:r.map((a,t)=>{var d;return e.jsxs("div",{className:`carousel-item ${t===0?"active":""}`,onClick:()=>o(a),children:[e.jsx("img",{src:((d=a.imagenes)==null?void 0:d[0])||"/placeholder-image.jpg",alt:a.nombre,className:"carousel-image",style:{height:"500px",width:"100%",objectFit:"scale-down"},onError:g=>{g.target.src="/placeholder-image.jpg"}}),e.jsx("div",{className:"carousel-caption d-none d-md-block",children:e.jsx("p",{className:"carousel-text",style:{color:"black"},children:a.nombre})})]},a.id)})}),e.jsxs("button",{className:"carousel-control-prev",type:"button","data-bs-target":"#carouselExampleIndicators","data-bs-slide":"prev",children:[e.jsx("span",{className:"carousel-control-prev-icon","aria-hidden":"true"}),e.jsx("span",{className:"visually-hidden",children:"Previous"})]}),e.jsxs("button",{className:"carousel-control-next",type:"button","data-bs-target":"#carouselExampleIndicators","data-bs-slide":"next",children:[e.jsx("span",{className:"carousel-control-next-icon","aria-hidden":"true"}),e.jsx("span",{className:"visually-hidden",children:"Next"})]})]})}),e.jsxs("section",{className:"new-arrivals",children:[e.jsxs("h2",{className:"titulo",children:["Disfraces de ",u]}),e.jsx("div",{className:"new-arrivals-container",children:i.length>0?i.map(a=>{var t;return e.jsxs(Y,{className:"new-arrival-card",onClick:()=>o(a),children:[e.jsx("img",{src:((t=a.imagenes)==null?void 0:t[0])||"/placeholder-image.jpg",alt:a.nombre,className:"arrival-image",onError:d=>{d.target.src="/placeholder-image.jpg"}}),e.jsx(W,{children:e.jsx("p",{children:a.nombre})})]},a.id)}):e.jsxs("p",{className:"no-disfraces",children:["No hay disfraces disponibles para ",u,"."]})})]}),e.jsxs("section",{className:"all-disfraces",children:[e.jsx("h2",{className:"all-title",children:"Todos los Disfraces"}),e.jsx("div",{className:"all-container",children:f.length>0?f.map(a=>{var t,d;return(t=a.festividades)==null||t.reduce((g,E)=>{const p=h.indexOf(g.mes);return h.indexOf(E.mes)>p?E:g},{mes:"Enero",dia:1}),e.jsxs(Y,{className:"all-card",onClick:()=>o(a),children:[e.jsx("img",{src:((d=a.imagenes)==null?void 0:d[0])||"/placeholder-image.jpg",alt:a.nombre,className:"all-image",onError:g=>{g.target.src="/placeholder-image.jpg"}}),e.jsx(W,{children:e.jsx("p",{children:a.nombre})})]},a.id)}):e.jsx("p",{className:"no-disfraces",children:"Cargando disfraces..."})})]})]})}const Te=()=>{const{obtenerDetalleDisfraz:s}=n.useContext(J),{disfraces:r}=n.useContext(J),{id:h}=Z(),u=R(),[c,l]=n.useState(null),[i,f]=n.useState(!0),[o,a]=n.useState(null),t=m=>`${m.nombre} - ${m.dia} de ${m.mes}`,d=m=>{const b=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"];return[...m].sort((x,j)=>{const q=b.indexOf(x.mes),C=b.indexOf(j.mes);return q!==C?q-C:x.dia-j.dia})};if(n.useEffect(()=>{(async()=>{try{f(!0);const b=await s(h);b?(b.festividades&&b.festividades.length>0&&(b.festividades=d(b.festividades)),l(b)):a("Producto no encontrado"),f(!1)}catch(b){console.error("Error al cargar el detalle del disfraz:",b),a("Error al cargar los detalles del producto"),f(!1)}})()},[h,s]),i)return e.jsx("div",{className:"loading-message",children:"Cargando detalles del producto..."});if(o)return e.jsx("div",{className:"error-message",children:o});if(!c)return e.jsx("div",{className:"producto-no-encontrado",children:"Producto no encontrado"});const g=c.imagenes||[],E=r.filter(m=>m.id!==parseInt(h,10)),p=m=>{u(`/productos/${m.id}`)};return e.jsxs("div",{className:"parent-ProductDetail",children:[e.jsx("div",{className:"product-img",children:e.jsxs("div",{id:"carouselExampleIndicators",className:"carousel slide",children:[e.jsx("div",{className:"carousel-indicators",children:g.map((m,b)=>e.jsx("button",{type:"button","data-bs-target":"#carouselExampleIndicators","data-bs-slide-to":b,className:b===0?"active":"","aria-label":`Slide ${b+1}`},b))}),e.jsx("div",{className:"carousel-inner",children:g.map((m,b)=>e.jsx("div",{className:`carousel-item ${b===0?"active":""}`,children:e.jsx("img",{src:m,className:"d-block w-100",alt:c.nombre})},b))}),g.length>1&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:"carousel-control-prev",type:"button","data-bs-target":"#carouselExampleIndicators","data-bs-slide":"prev",children:[e.jsx("span",{className:"carousel-control-prev-icon","aria-hidden":"true"}),e.jsx("span",{className:"visually-hidden",children:"Previous"})]}),e.jsxs("button",{className:"carousel-control-next",type:"button","data-bs-target":"#carouselExampleIndicators","data-bs-slide":"next",children:[e.jsx("span",{className:"carousel-control-next-icon","aria-hidden":"true"}),e.jsx("span",{className:"visually-hidden",children:"Next"})]})]})]})}),e.jsxs("div",{className:"product-info",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Nombre:"})," ",c.nombre]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Descripción:"})," ",c.descripcion||"No hay descripción disponible."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Evento:"}),c.festividades&&c.festividades.length>0?e.jsx("ul",{className:"festividades-list",children:c.festividades.map((m,b)=>e.jsx("li",{children:t(m)},m.id||b))}):"Evento no disponible"]}),e.jsx("p",{children:e.jsx("strong",{children:"Etiquetas:"})}),e.jsx("ul",{className:"product-prendas",children:c.etiquetas&&c.etiquetas.length>0?c.etiquetas.map(m=>e.jsx("li",{children:m.nombre},m.id)):e.jsx("li",{children:"No hay etiquetas disponibles."})})]}),e.jsxs("div",{className:"product-related",children:[e.jsx("h2",{children:"Productos Similares"}),e.jsx("div",{className:"productos-similares-container",children:e.jsx("div",{className:"productos-similares-lista",children:E.slice(0,6).map((m,b)=>e.jsxs("div",{className:"producto-similar",onClick:()=>p(m),children:[e.jsx("img",{src:m.imagenes[0],alt:m.nombre}),e.jsx("p",{children:m.nombre})]},b))})})]})]})},G=({children:s,tipo:r})=>{const h=r==="success"?"success":"error",u=r==="success"?ye:Ee;return e.jsxs("div",{className:`mensaje-container ${h}`,children:[e.jsx(B,{icon:u,className:"mensaje-icon"}),e.jsx("div",{className:"mensaje-text",children:e.jsx("p",{children:s})})]})},Be=()=>{const[s,r]=n.useState({email:"",password:"",tipoUsuario:"usuario"}),[h,u]=n.useState({}),c=R(),l=f=>{r({...s,[f.target.name]:f.target.value})},i=async f=>{var o,a;f.preventDefault();try{const t=s.tipoUsuario==="admin"||s.tipoUsuario==="moderador"?"https://backend-mywf.onrender.com/api/admin/login":"https://backend-mywf.onrender.com/api/usuario/login",d=await P.post(t,s);if(d!=null&&d.data)u({respuesta:d.data.msg,tipo:!0}),d.data.token&&(localStorage.setItem("token",d.data.token),localStorage.setItem("tipoUsuario",d.data.rol),console.log("Rol guardado en localStorage:",d.data.rol),d.data.rol==="admin"||d.data.rol==="moderador"||d.data.rol==="usuario"?c("/"):u({respuesta:"Rol desconocido",tipo:!1})),r({email:"",password:"",tipoUsuario:"usuario"});else throw new Error("Respuesta inesperada del servidor")}catch(t){const d=((a=(o=t.response)==null?void 0:o.data)==null?void 0:a.msg)||"Error al iniciar sesión";u({respuesta:d,tipo:!1}),console.error("Error:",t.message)}};return e.jsxs("div",{className:"login-body",children:[e.jsx(L,{className:"brand",to:"/",children:e.jsxs("div",{className:"brand-content",children:[e.jsx("img",{src:"public/logo.png",alt:"Logo Megadisfraz",className:"header-logo-img"}),e.jsx("span",{className:"brand-text",children:"Megadisfraz"})]})}),e.jsxs("div",{className:"login-wrapper",children:[e.jsx("h2",{className:"text-center mb-4",children:"Iniciar sesión"}),e.jsxs("form",{id:"login-form",onSubmit:i,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",children:"Correo electrónico:"}),e.jsx("input",{type:"email",className:"form-control",id:"email",name:"email",value:s.email,onChange:l,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"password",children:"Contraseña:"}),e.jsx("input",{type:"password",className:"form-control",id:"password",name:"password",value:s.password,onChange:l,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Tipo de usuario:"}),e.jsxs("select",{name:"tipoUsuario",className:"form-control",onChange:l,value:s.tipoUsuario,children:[e.jsx("option",{value:"usuario",children:"Usuario"}),e.jsx("option",{value:"admin",children:"Administrador"}),e.jsx("option",{value:"moderador",children:"Moderador"})]})]}),e.jsx("p",{className:"forgot-password",children:e.jsx(L,{to:"/forgot/id",className:"forgot-link",children:"¿Olvidaste tu contraseña?"})}),e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Iniciar sesión"}),e.jsxs("p",{className:"text-center mt-3",children:["¿No tienes una cuenta?"," ",e.jsx(L,{to:"/register",className:"register-link",children:"Regístrate"})]})]}),h.respuesta&&e.jsx(G,{tipo:h.tipo?"success":"error",children:h.respuesta})]})]})},Oe=()=>{const[s,r]=n.useState({nombre:"",apellido:"",email:"",password:""}),[h,u]=n.useState({respuesta:"",tipo:""}),c=R(),l=f=>{r({...s,[f.target.name]:f.target.value})},i=async f=>{f.preventDefault();const o=/^[a-zA-ZáéíóúÁÉÍÓÚñÑ\s]+$/;if(!s.nombre.trim()||!s.apellido.trim()||!s.email.trim()||!s.password.trim()){u({respuesta:"Todos los campos son obligatorios.",tipo:"error"});return}if(!o.test(s.nombre)||!o.test(s.apellido)){u({respuesta:"El nombre y apellido solo pueden contener letras y espacios.",tipo:"error"});return}try{const t=await P.post("https://backend-mywf.onrender.com/api/usuario/registro",s);t&&t.data?(u({respuesta:t.data.msg,tipo:"success"}),setTimeout(()=>{u({respuesta:"",tipo:""}),c("/login")},3e3),r({nombre:"",apellido:"",email:"",password:""})):u({respuesta:"Algo salió mal",tipo:"error"})}catch(a){const t=a.response&&a.response.data?a.response.data.msg:"Error al registrar";u({respuesta:t,tipo:"error"})}};return e.jsxs("div",{className:"login-body",children:[e.jsx(L,{className:"brand",to:"/",children:e.jsxs("div",{className:"brand-content",children:[e.jsx("img",{src:"public/logo.png",alt:"Logo Megadisfraz",className:"header-logo-img"}),e.jsx("span",{className:"brand-text",children:"Megadisfraz"})]})}),e.jsxs("div",{className:"login-wrapper",children:[e.jsx("h2",{className:"text-center mb-4",children:"Registro"}),e.jsxs("form",{id:"login-form",onSubmit:i,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"nombre",children:"Nombre:"}),e.jsx("input",{type:"text",className:"form-control",id:"nombre",name:"nombre",value:s.nombre,onChange:l})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"apellido",children:"Apellido:"}),e.jsx("input",{type:"text",className:"form-control",id:"apellido",name:"apellido",value:s.apellido,onChange:l})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",children:"Correo Electrónico:"}),e.jsx("input",{type:"email",className:"form-control",id:"email",name:"email",value:s.email,onChange:l})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"password",children:"Contraseña:"}),e.jsx("input",{type:"password",className:"form-control",id:"password",name:"password",value:s.password,onChange:l})]}),e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Registrarse"}),e.jsxs("p",{className:"text-center mt-3",children:["¿Ya tienes una cuenta?"," ",e.jsx(L,{to:"/login",className:"login-link",children:"Inicia Sesión"})]})]}),h.respuesta&&e.jsx(G,{tipo:h.tipo,children:h.respuesta})]})]})},Re=()=>{const{token:s}=Z(),[r,h]=n.useState({respuesta:"",tipo:null});return n.useEffect(()=>{(async()=>{var c,l;try{const i=`https://backend-mywf.onrender.com/api/usuario/confirmar/${s}`,f=await P.get(i);h({respuesta:f.data.msg,tipo:"success"})}catch(i){h({respuesta:((l=(c=i.response)==null?void 0:c.data)==null?void 0:l.msg)||"Error al confirmar cuenta",tipo:"error"})}})()},[s]),e.jsxs("div",{className:"login-body",children:[e.jsx(L,{className:"brand",to:"/",children:e.jsxs("div",{className:"brand-content",children:[e.jsx("img",{src:"public/logo.png",alt:"Logo Megadisfraz",className:"header-logo-img"}),e.jsx("span",{className:"brand-text",children:"Megadisfraz"})]})}),e.jsxs("div",{className:"login-wrapper",children:[e.jsx("h2",{className:"text-center mb-4",children:"Confirmación de Cuenta"}),r.respuesta&&e.jsx(G,{tipo:r.tipo,children:r.respuesta}),e.jsx("div",{className:"confirmar-circle",children:e.jsx(B,{icon:Ce,className:"confirmar-icon"})}),e.jsx("p",{className:"text-center confirmar-texto-gracias",children:"¡Gracias por confirmar tu cuenta!"}),e.jsx("p",{className:"text-center confirmar-texto-iniciar",children:"Ahora puedes iniciar sesión."}),e.jsx(L,{to:"/login",className:"confirmar-link",children:"Iniciar Sesión"})]})]})},Je=()=>{const[s,r]=n.useState({}),[h,u]=n.useState({email:"",tipoUsuario:"usuario"}),c=i=>{u({...h,[i.target.name]:i.target.value})},l=async i=>{var f,o;i.preventDefault();try{const a=h.tipoUsuario==="admin"?"https://backend-mywf.onrender.com/api/admin/recuperar-password":"https://backend-mywf.onrender.com/api/usuario/recuperar-password",t=await P.post(a,{email:h.email});r({respuesta:t.data.msg,tipo:"success"}),u({email:"",tipoUsuario:"usuario"})}catch(a){r({respuesta:((o=(f=a.response)==null?void 0:f.data)==null?void 0:o.msg)||"Error al recuperar contraseña",tipo:"error"})}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"login-body",children:[e.jsx(L,{className:"brand",to:"/",children:e.jsxs("div",{className:"brand-content",children:[e.jsx("img",{src:"/logo.png",alt:"Logo Megadisfraz",className:"header-logo-img"}),e.jsx("span",{className:"brand-text",children:"Megadisfraz"})]})}),e.jsxs("div",{className:"login-wrapper",children:[s.respuesta&&e.jsx(G,{tipo:s.tipo,children:s.respuesta}),e.jsx("h1",{className:"text-center mb-4",children:"¡Olvidaste tu contraseña!"}),e.jsx("h3",{className:"text-center mb-4",children:"No te preocupes, ingresa tu correo"}),e.jsxs("form",{onSubmit:l,children:[e.jsxs("div",{className:"login-form-group",children:[e.jsx("label",{className:"mb-2 block text-sm font-semibold",children:"Email"}),e.jsx("input",{type:"email",placeholder:"Enter your email",className:"form-control",name:"email",value:h.email,onChange:c})]}),e.jsxs("div",{className:"login-form-group",children:[e.jsx("label",{className:"mb-2 block text-sm font-semibold",children:"Tipo de Usuario"}),e.jsxs("select",{className:"form-control",name:"tipoUsuario",value:h.tipoUsuario,onChange:c,children:[e.jsx("option",{value:"usuario",children:"Usuario"}),e.jsx("option",{value:"admin",children:"Administrador"})]})]}),e.jsx("div",{className:"mb-3",children:e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Enviar Correo"})})]}),e.jsxs("div",{className:"text-center mt-3",children:[e.jsx("p",{children:"Si la recuerdas"}),e.jsx(L,{to:"/login",className:"register-link",children:"Login"})]})]})]}),e.jsx("div",{className:"forgot-background"})]})},_e=()=>{const{token:s}=Z(),r=R(),[h,u]=n.useState(!1),[c,l]=n.useState({password:"",confirmpassword:""}),i=o=>{l({...c,[o.target.name]:o.target.value||""})},f=async o=>{o.preventDefault();try{const a=`https://backend-mywf.onrender.com/api/usuario/nuevo-password/${s}`,t=await P.post(a,c);l({password:"",confirmpassword:""}),H.success(t.data.msg),setTimeout(()=>{r("/login")},3e3)}catch(a){H.error(a.response.data.msg)}};return n.useEffect(()=>{(async()=>{try{const a=`https://backend-mywf.onrender.com/api/usuario/recuperar-password/${s}`,t=await P.get(a);u(!0),H.success(t.data.msg)}catch(a){H.error(a.response.data.msg)}})()},[s]),e.jsxs("div",{className:"login-body",children:[e.jsx(L,{className:"brand",to:"/",children:e.jsxs("div",{className:"brand-content",children:[e.jsx("img",{src:"public/logo.png",alt:"Logo Megadisfraz",className:"header-logo-img"}),e.jsx("span",{className:"brand-text",children:"Megadisfraz"})]})}),e.jsxs("div",{className:"login-wrapper",children:[e.jsx(Se,{}),e.jsx("h1",{className:"text-center mb-4 text-3xl font-semibold uppercase text-gray-500",children:"Bienvenido Otra Vez"}),e.jsx("small",{className:"text-center text-gray-400 my-4 block text-sm",children:"Por favor ingresa los detalles"}),h&&e.jsxs("form",{className:"w-full",onSubmit:f,children:[e.jsxs("div",{className:"login-form-group",children:[e.jsx("label",{className:"mb-2 block text-sm font-semibold",children:"Password"}),e.jsx("input",{type:"password",placeholder:"Enter your password",className:"form-control",name:"password",value:c.password,onChange:i}),e.jsx("label",{className:"mb-2 block text-sm font-semibold",children:"Confirm Password"}),e.jsx("input",{type:"password",placeholder:"Repeat your password",className:"form-control",name:"confirmpassword",value:c.confirmpassword,onChange:i})]}),e.jsx("div",{className:"mb-3",children:e.jsx("button",{className:"btn btn-primary",children:"Enviar"})})]})]})]})},He=()=>{const s=R(),{auth:r,obtenerPerfil:h,actualizarPerfil:u,actualizarPassword:c}=n.useContext(le),[l,i]=n.useState({passwordactual:"",password:"",confirmpassword:""}),[f,o]=n.useState(""),[a,t]=n.useState(""),[d,g]=n.useState(""),E=r==null?void 0:r.rol;n.useEffect(()=>{const j=localStorage.getItem("token");j?h(j).then(q=>{t(q.nombre),g(q.apellido)}).catch(()=>{o("Error al cargar el perfil.")}):s("/")},[s]);const p=()=>{localStorage.removeItem("token"),localStorage.removeItem("tipoUsuario"),s("/")},m=j=>{i({...l,[j.target.name]:j.target.value})},b=async j=>{j.preventDefault();const q=/^[a-zA-ZáéíóúÁÉÍÓÚñÑ\s]+$/;if(!a.trim()||!d.trim()){o("El nombre y apellido no pueden estar vacíos.");return}if(!q.test(a)||!q.test(d)){o("El nombre y apellido solo pueden contener letras y espacios.");return}try{await u(r.usuario._id,{nombre:a,apellido:d}),o("Perfil actualizado con éxito."),setTimeout(()=>{s("/perfil")},1e3)}catch{o("Error al actualizar el perfil.")}},x=async j=>{if(j.preventDefault(),!l.passwordactual||!l.password||!l.confirmpassword){o("Todos los campos de contraseña son obligatorios.");return}if(l.password!==l.confirmpassword){o("Las contraseñas no coinciden.");return}try{await c({passwordactual:l.passwordactual,passwordnuevo:l.password}),o("Contraseña actualizada correctamente."),i({passwordactual:"",password:"",confirmpassword:""})}catch{o("Error al actualizar la contraseña.")}};return e.jsx("div",{className:"profile-container",children:e.jsxs("div",{className:"profile-wrapper",children:[e.jsx("h4",{className:"mb-4 text-center",children:E==="admin"?"Perfil de Administrador":"Perfil de Usuario"}),f&&e.jsx("div",{className:`alert ${f.includes("Error")?"alert-danger":"alert-success"}`,children:f}),r.usuario?e.jsxs("table",{className:"profile-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{class:"hidden-on-mobile",children:"ID de Usuario"}),e.jsx("th",{children:"Correo Electrónico"}),e.jsx("th",{children:"Nombre"}),e.jsx("th",{children:"Apellido"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{class:"hidden-on-mobile",children:r.usuario._id}),e.jsx("td",{children:r.usuario.email}),e.jsx("td",{children:r.usuario.nombre}),e.jsx("td",{children:r.usuario.apellido})]})})]}):e.jsx("p",{children:"Cargando..."}),e.jsxs("form",{onSubmit:b,children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Nuevo Nombre"}),e.jsx("input",{type:"text",className:"profile-input",value:a,onChange:j=>t(j.target.value)})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Nuevo Apellido"}),e.jsx("input",{type:"text",className:"profile-input",value:d,onChange:j=>g(j.target.value)})]}),e.jsx("button",{type:"submit",className:"btn btn-success profile-button",children:"Actualizar Perfil"})]}),e.jsxs("form",{onSubmit:x,children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Contraseña Actual"}),e.jsx("input",{type:"password",placeholder:"Ingrese su contraseña actual",className:"profile-input",name:"passwordactual",value:l.passwordactual,onChange:m})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Nueva Contraseña"}),e.jsx("input",{type:"password",placeholder:"Ingrese su nueva contraseña",className:"profile-input",name:"password",value:l.password,onChange:m})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Confirmar Contraseña"}),e.jsx("input",{type:"password",placeholder:"Repita su nueva contraseña",className:"profile-input",name:"confirmpassword",value:l.confirmpassword,onChange:m})]}),e.jsx("button",{type:"submit",className:"btn btn-success profile-button",children:"Actualizar Contraseña"})]}),e.jsx("div",{className:"d-flex justify-content-between mt-3",children:e.jsx("button",{type:"button",className:"btn btn-danger profile-button",onClick:p,children:"Cerrar Sesión"})})]})})},Ge=()=>e.jsxs("div",{className:"not-found-container",children:[e.jsx("img",{src:"public/logo.png",alt:"Logo Megadisfraz",className:"header-logo-img"}),e.jsx("span",{className:"brand-text",children:"Megadisfraz"}),e.jsx("div",{className:"not-found-icon-wrapper",children:e.jsx(B,{icon:ke,className:"not-found-icon"})}),e.jsx("div",{className:"not-found-content-wrapper",children:e.jsxs("div",{className:"not-found-content",children:[e.jsx("p",{className:"not-found-title",children:"Pagina no encontrada"}),e.jsx("p",{className:"not-found-text",children:"Lo sentimos, la pagina que buscas no se puedo encontrar"})]})})]}),Xe=()=>{const s=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],[r,h]=n.useState({mes:"",dia:"",nombre:"",descripcion:""}),[u,c]=n.useState([]),l=o=>{const a=["Abril","Junio","Septiembre","Noviembre"];return o==="Febrero"?Array.from({length:29},(t,d)=>d+1):a.includes(o)?Array.from({length:30},(t,d)=>d+1):Array.from({length:31},(t,d)=>d+1)};n.useEffect(()=>{r.mes&&(c(l(r.mes)),h(o=>({...o,dia:""})))},[r.mes]);const i=o=>{const{name:a,value:t}=o.target;h({...r,[a]:t})},f=async o=>{o.preventDefault();try{const a=await fetch("https://backend-mywf.onrender.com/api/festividad/crear",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({...r,dia:parseInt(r.dia,10)})});if(!a.ok)throw new Error("Error al crear el evento");await a.json(),alert("✅ Evento creado exitosamente")}catch{alert("❌ Hubo un problema al crear el evento")}};return e.jsxs("div",{className:"form-container",children:[e.jsx("h2",{className:"tittle-crearev",children:"Crear Eventos"}),e.jsxs("form",{onSubmit:f,className:"form-content",children:[e.jsxs("div",{className:"form-group1",children:[e.jsx("label",{htmlFor:"mes",children:"Mes:"}),e.jsxs("select",{id:"mes",name:"mes",className:"form-input3",value:r.mes,onChange:i,required:!0,children:[e.jsx("option",{value:"",children:"-- Selecciona un mes --"}),s.map((o,a)=>e.jsx("option",{value:o,children:o},a))]})]}),e.jsxs("div",{className:"form-group1",children:[e.jsx("label",{htmlFor:"dia",children:"Día:"}),e.jsxs("select",{id:"dia",name:"dia",className:"form-input3",value:r.dia,onChange:i,required:!0,disabled:!r.mes,children:[e.jsx("option",{value:"",children:"-- Selecciona un día --"}),u.map(o=>e.jsx("option",{value:o.toString(),children:o},o))]})]}),e.jsxs("div",{className:"form-group1",children:[e.jsx("label",{htmlFor:"nombre",children:"Nombre del evento o festividad:"}),e.jsx("input",{type:"text",id:"nombre",name:"nombre",className:"form-input3",value:r.nombre,onChange:i,required:!0})]}),e.jsxs("div",{className:"form-group1",children:[e.jsx("label",{htmlFor:"descripcion",children:"Descripción de la festividad:"}),e.jsx("textarea",{id:"descripcion",name:"descripcion",className:"form-input3",value:r.descripcion,onChange:i,required:!0})]}),e.jsx("button",{type:"submit",className:"form-button",children:"Crear"})]})]})},Qe=()=>{const s=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],[r,h]=n.useState([]),[u,c]=n.useState([]),[l,i]=n.useState({mes:"",dia:"",nombre:"",descripcion:""}),[f,o]=n.useState([]),[a,t]=n.useState(!1),[d,g]=n.useState(null),[E,p]=n.useState("");n.useEffect(()=>{(async()=>{try{const A=await fetch("https://backend-mywf.onrender.com/api/festividad/festividades",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!A.ok)throw new Error("Error al obtener los eventos");const D=await A.json();h(D),c(D)}catch(A){console.error("Error al cargar los eventos:",A),alert("Hubo un problema al cargar los eventos")}})()},[]),n.useEffect(()=>{if(E.trim()==="")c(r);else{const C=r.filter(A=>A.nombre.toLowerCase().includes(E.toLowerCase())||A.mes.toLowerCase().includes(E.toLowerCase())||A.dia.toString().includes(E));c(C)}},[E,r]);const m=C=>{const A=["Abril","Junio","Septiembre","Noviembre"];return C==="Febrero"?Array.from({length:29},(D,v)=>v+1):A.includes(C)?Array.from({length:30},(D,v)=>v+1):Array.from({length:31},(D,v)=>v+1)};n.useEffect(()=>{l.mes&&(o(m(l.mes)),i(C=>({...C,dia:""})))},[l.mes]);const b=C=>{const A=r.find(D=>D.id===C);A&&(i(A),g(C),t(!0))},x=async C=>{if(window.confirm("¿Estás seguro de que deseas eliminar este evento?"))try{if(!(await fetch(`https://backend-mywf.onrender.com/api/festividad/eliminar/${C}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).ok)throw new Error("Error al eliminar el evento");alert("Evento eliminado exitosamente");const v=r.filter(N=>N.id!==C);h(v),c(v),p("")}catch(D){console.error("Error al eliminar el evento:",D),alert("Hubo un problema al eliminar el evento")}},j=C=>{const{name:A,value:D}=C.target;i({...l,[A]:D})},q=async C=>{C.preventDefault();try{const A=await fetch(`https://backend-mywf.onrender.com/api/festividad/actualizar/${d}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({...l,dia:parseInt(l.dia,10)})});if(!A.ok)throw new Error("Error al actualizar el evento");const D=await A.json();alert("✅ Evento actualizado exitosamente"),console.log("Evento actualizado:",D),t(!1),h(v=>v.map(N=>N.id===d?{...N,...l}:N)),c(v=>v.map(N=>N.id===d?{...N,...l}:N))}catch(A){console.error("Error al actualizar el evento:",A),alert("❌ Hubo un problema al actualizar el evento")}};return e.jsx("div",{className:"form-container",children:a?e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"tittle-editarev",children:"Editar Evento"}),e.jsxs("form",{onSubmit:q,className:"form-content",children:[e.jsxs("div",{className:"form-group1",children:[e.jsx("label",{htmlFor:"mes",children:"Mes:"}),e.jsxs("select",{id:"mes",name:"mes",className:"form-input3",value:l.mes,onChange:j,required:!0,children:[e.jsx("option",{value:"",children:"-- Selecciona un mes --"}),s.map((C,A)=>e.jsx("option",{value:C,children:C},A))]})]}),e.jsxs("div",{className:"form-group1",children:[e.jsx("label",{htmlFor:"dia",children:"Día:"}),e.jsxs("select",{id:"dia",name:"dia",className:"form-input3",value:l.dia,onChange:j,required:!0,disabled:!l.mes,children:[e.jsx("option",{value:"",children:"-- Selecciona un día --"}),f.map(C=>e.jsx("option",{value:C.toString(),children:C},C))]})]}),e.jsxs("div",{className:"form-group1",children:[e.jsx("label",{htmlFor:"nombre",children:"Nombre del evento o festividad:"}),e.jsx("input",{type:"text",id:"nombre",name:"nombre",className:"form-input3",value:l.nombre,onChange:j,required:!0})]}),e.jsxs("div",{className:"form-group1",children:[e.jsx("label",{htmlFor:"descripcion",children:"Descripción de la festividad:"}),e.jsx("textarea",{id:"descripcion",name:"descripcion",className:"form-input3",value:l.descripcion,onChange:j,required:!0})]}),e.jsx("button",{type:"submit",className:"form-buttonev",children:"Guardar Cambios"}),e.jsx("button",{type:"button",onClick:()=>t(!1),className:"cancel-button",children:"Cancelar"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"tittle-editarev",children:"Lista de Festividades"}),e.jsxs("div",{className:"form-content",children:[e.jsx("label",{htmlFor:"busqueda",children:"Buscar por Nombre, Mes o Día:"}),e.jsx("input",{type:"text",id:"busqueda",name:"busqueda",className:"form-input",value:E,onChange:C=>p(C.target.value),placeholder:"Ingrese un nombre, mes o día"})]}),e.jsx("ul",{className:"event-list",children:u.map(C=>e.jsxs("li",{className:"event-item",children:[C.nombre," - ",C.mes,"/",C.dia,e.jsx("button",{onClick:()=>b(C.id),className:"edit-button1",children:"Actualizar"}),e.jsx("button",{onClick:()=>x(C.id),className:"delete-button1",children:"Eliminar"})]},C.id))})]})})},Ye=()=>{const[s,r]=n.useState(null);return e.jsxs("div",{className:"admin-container",children:[e.jsx("h1",{className:"admin-title",children:"Gestión de Eventos"}),e.jsxs("div",{className:"admin-buttons-container",children:[e.jsx("button",{className:"admin-button button-crear",onClick:()=>r("crear"),children:"Crear Evento"}),e.jsx("button",{className:"admin-button button-actualizar",onClick:()=>r("editar"),children:"Editar Evento"})]}),e.jsxs("div",{className:"admin-module-container",style:{marginTop:"20px"},children:[s==="crear"&&e.jsx(Xe,{}),s==="editar"&&e.jsx(Qe,{})]})]})},We=()=>{const s=re(),r=R(),{disfraces:h=[]}=n.useContext(J),[u,c]=n.useState(""),[l,i]=n.useState(""),[f,o]=n.useState(""),[a,t]=n.useState(""),d=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],g=x=>x?x.replace(/\|/g,"").trim():"";n.useEffect(()=>{const x=new URLSearchParams(s.search),j=x.get("month")||"";c(x.get("query")||""),i(g(j)),o(x.get("etiqueta")||""),t(x.get("event")||""),console.log("🔍 Parámetros de búsqueda (limpios):",{query:x.get("query"),month:g(j),etiqueta:x.get("etiqueta"),event:x.get("event")})},[s]);const E=h.filter(x=>{const j=l.toLowerCase(),q=f.toLowerCase(),C=a.toLowerCase(),A=u.toLowerCase();return(!u||x.nombre.toLowerCase().includes(A)||x.descripcion&&x.descripcion.toLowerCase().includes(A))&&(!l||x.festividades&&x.festividades.some(D=>D&&D.mes&&D.mes.toLowerCase()===j))&&(!f||x.etiquetas&&x.etiquetas.some(D=>D&&D.nombre&&D.nombre.toLowerCase()===q))&&(!a||x.festividades&&x.festividades.some(D=>D&&D.nombre&&D.nombre.toLowerCase().includes(C)))}),m=(x=>{if(!x||x.length===0)return[];const j=d[new Date().getMonth()],q=d.indexOf(j),C=[...d.slice(q),...d.slice(0,q)].reverse();return[...x].sort((A,D)=>{if(!A.festividades||!D.festividades)return 0;const v=N=>{let k=-1;return N.festividades.forEach(F=>{if(!F||!F.mes)return;const M=C.indexOf(F.mes);M>k&&(k=M)}),k};return v(D)-v(A)})})(E),b=x=>{r(`/productos/${x.id}`)};return e.jsx("div",{className:"searches-container",children:e.jsxs("section",{className:"filtered-disfraces",children:[e.jsxs("h2",{className:"filtered-title",children:[u&&`Resultados para "${u}"`,l&&` | Disfraces de ${l}`,f&&` | Etiqueta: ${f}`,a&&` | Evento: ${a}`]}),e.jsx("div",{className:"filtered-container",children:m.length>0?m.map(x=>{var j,q;return e.jsxs(Y,{className:"filtered-card",onClick:()=>b(x),children:[e.jsx("img",{src:((j=x.imagenes)==null?void 0:j[0])||"/placeholder-image.jpg",alt:x.nombre,className:"filtered-image",onError:C=>{C.target.src="/placeholder-image.jpg"}}),e.jsxs(W,{children:[e.jsx("p",{children:x.nombre}),((q=x.festividades)==null?void 0:q.length)>0&&e.jsxs("small",{children:["Festividades: ",x.festividades.map(C=>C.mes).join(", ")]})]})]},x.id)}):e.jsx("p",{className:"no-disfraces",children:"No se encontraron disfraces con los filtros aplicados."})})]})})},Ze=()=>{const[s,r]=n.useState({nombre:"",etiquetas:[],festividades:[],descripcion:"",imagenes:[]}),[h,u]=n.useState([]),[c,l]=n.useState([]),[i,f]=n.useState(!0),[o,a]=n.useState(null),[t,d]=n.useState(!1),g=v=>{const N=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"];return[...v].sort((k,F)=>{const M=N.indexOf(k.mes),O=N.indexOf(F.mes);return M!==O?M-O:k.dia-F.dia})},E=v=>[...v].sort((N,k)=>N.nombre.localeCompare(k.nombre));n.useEffect(()=>{(async()=>{try{const[N,k]=await Promise.all([fetch("https://backend-mywf.onrender.com/api/festividad/festividades",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),fetch("https://backend-mywf.onrender.com/api/etiqueta/listar",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})]);if(!N.ok||!k.ok)throw new Error("Error al cargar datos iniciales");const[F,M]=await Promise.all([N.json(),k.json()]);u(g(F||[])),l(E(M||[])),f(!1)}catch(N){console.error("Error al cargar datos:",N),a("Hubo un problema al cargar los datos necesarios"),f(!1)}})()},[]);const p=v=>{const{name:N,value:k}=v.target;r(F=>({...F,[N]:k}))},m=v=>{const N=parseInt(v.target.value);if(N===-1){window.location.href="/etiquetas";return}s.etiquetas.includes(N)||(s.etiquetas.length<6?r(k=>({...k,etiquetas:[...k.etiquetas,N]})):alert("❌ Máximo 6 etiquetas permitidas"))},b=v=>{r(N=>({...N,etiquetas:N.etiquetas.filter(k=>k!==v)}))},x=v=>{const N=parseInt(v.target.value);if(N===-1){window.location.href="/eventos";return}s.festividades.includes(N)||(s.festividades.length<5?r(k=>({...k,festividades:[...k.festividades,N]})):alert("❌ Máximo 5 festividades permitidas"))},j=v=>{r(N=>({...N,festividades:N.festividades.filter(k=>k!==v)}))},q=v=>{const N=Array.from(v.target.files);if(N.length+s.imagenes.length>3){alert("❌ Solo puedes subir un máximo de 3 imágenes");return}const k=N.map(F=>new Promise(M=>{const O=new FileReader;O.onloadend=()=>{M({file:F,preview:O.result})},O.readAsDataURL(F)}));Promise.all(k).then(F=>{r(M=>({...M,imagenes:[...M.imagenes,...F]}))})},C=v=>{r(N=>{const k=[...N.imagenes];return k.splice(v,1),{...N,imagenes:k}})},A=async()=>{try{const v=s.imagenes.map(async N=>{const k=new FormData;k.append("file",N.file),k.append("upload_preset","megadisfraz");const F=await fetch("https://api.cloudinary.com/v1_1/dxnnwuzrl/image/upload",{method:"POST",body:k});if(!F.ok){const M=await F.json();throw new Error(M.message||"Error al subir imagen")}return F.json()});return await Promise.all(v)}catch(v){throw console.error("Error al subir imágenes:",v),v}},D=async v=>{if(v.preventDefault(),d(!0),s.imagenes.length===0){alert("❌ Debes subir al menos una imagen"),d(!1);return}if(s.festividades.length===0){alert("❌ Debes seleccionar al menos una festividad"),d(!1);return}try{const k=(await A()).map(X=>X.secure_url),F={nombre:s.nombre.trim(),descripcion:s.descripcion.trim(),festividades:s.festividades,etiquetas:s.etiquetas,imagenes:k},M=await fetch("https://backend-mywf.onrender.com/api/disfraz/registro",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(F)}),O=await M.json();if(!M.ok)throw new Error(O.msg||"Error al crear el disfraz");alert("✅ Disfraz creado exitosamente"),r({nombre:"",etiquetas:[],festividades:[],descripcion:"",imagenes:[]})}catch(N){console.error("Error completo:",N),alert(N.message||"Hubo un problema al crear el disfraz")}finally{d(!1)}};return i?e.jsxs("div",{className:"form-container",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Cargando datos necesarios..."})]}):o?e.jsxs("div",{className:"form-container",children:[e.jsx("p",{className:"error-message",children:o}),e.jsx("button",{className:"form-button",onClick:()=>window.location.reload(),children:"Reintentar"})]}):e.jsx("div",{className:"form-container",children:e.jsxs("form",{onSubmit:D,className:"form-content",children:[e.jsx("h2",{children:"Crear Disfraz"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"nombre",children:"Nombre:"}),e.jsx("input",{type:"text",id:"nombre",name:"nombre",className:"form-input",value:s.nombre,onChange:p,required:!0,maxLength:100})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"etiquetas",children:"Etiquetas (máx. 6):"}),e.jsxs("select",{id:"etiquetas",name:"etiquetas",className:"form-input1",onChange:m,value:"",children:[e.jsx("option",{value:"",children:"Seleccione una etiqueta"}),c.map(v=>e.jsx("option",{value:v.id,children:v.nombre},v.id)),e.jsx("option",{value:"-1",children:"➕ Crear nueva etiqueta"})]}),e.jsx("ul",{className:"etiquetas-list",children:s.etiquetas.map(v=>{const N=c.find(k=>k.id===v);return e.jsxs("li",{children:[(N==null?void 0:N.nombre)||"Etiqueta desconocida",e.jsx("button",{type:"button",className:"remove-button",onClick:()=>b(v),children:"X"})]},v)})}),e.jsxs("p",{className:s.etiquetas.length>=6?"text-error":"",children:[s.etiquetas.length," / 6 etiquetas seleccionadas"]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"festividad",children:"Festividades (máx. 5):"}),e.jsxs("select",{id:"festividad",name:"festividad",className:"form-input1",onChange:x,value:"",children:[e.jsx("option",{value:"",children:"Seleccione una festividad"}),h.map(v=>e.jsxs("option",{value:v.id,children:[v.nombre," - ",v.mes,"/",v.dia]},v.id)),e.jsx("option",{value:"-1",children:"➕ Crear nueva festividad"})]}),e.jsx("ul",{className:"festividades-list",children:s.festividades.map(v=>{const N=h.find(k=>k.id===v);return e.jsxs("li",{children:[(N==null?void 0:N.nombre)||"Festividad desconocida",e.jsx("button",{type:"button",className:"remove-button",onClick:()=>j(v),children:"X"})]},v)})}),e.jsxs("p",{className:s.festividades.length>=5?"text-error":"",children:[s.festividades.length," / 5 festividades seleccionadas"]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"descripcion",children:"Descripción (máx. 250 caracteres):"}),e.jsx("textarea",{id:"descripcion",name:"descripcion",className:"form-input1",maxLength:250,value:s.descripcion,onChange:p,required:!0}),e.jsxs("p",{className:s.descripcion.length>=250?"text-error":"",children:[s.descripcion.length," / 250 caracteres",s.descripcion.length>=250&&" (Límite alcanzado)"]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Imágenes (máximo 3):"}),e.jsxs("div",{className:"image-preview-container",children:[s.imagenes.map((v,N)=>e.jsxs("div",{className:"image-box",children:[e.jsx("img",{src:v.preview,alt:`Preview ${N}`,className:"preview-img"}),e.jsx("button",{type:"button",className:"remove-button",onClick:()=>C(N),"aria-label":"Eliminar imagen",children:"X"})]},N)),s.imagenes.length<3&&e.jsxs("div",{className:"image-box upload-box",children:[e.jsxs("label",{className:"add-image-label",children:["+",e.jsx("input",{type:"file",accept:"image/*",onChange:q,hidden:!0,multiple:!0,"aria-label":"Añadir imagen"})]}),e.jsx("p",{className:"add-image-text",children:"Añadir imagen"})]})]})]}),e.jsx("button",{type:"submit",className:"form-button",disabled:t,children:t?"Creando...":"Crear Disfraz"})]})})},Ke=()=>{const[s,r]=n.useState([]),[h,u]=n.useState([]),[c,l]=n.useState([]),[i,f]=n.useState([]),[o,a]=n.useState({nombre:"",festividades:[],descripcion:"",etiquetas:[],imagenes:[]}),[t,d]=n.useState(null),[g,E]=n.useState(""),[p,m]=n.useState(!0),[b,x]=n.useState(null),[j,q]=n.useState(!1),C=w=>{const y=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"];return[...w].sort((S,z)=>{const I=y.indexOf(S.mes),$=y.indexOf(z.mes);return I!==$?I-$:S.dia-z.dia})},A=w=>[...w].sort((y,S)=>y.nombre.localeCompare(S.nombre));n.useEffect(()=>{(async()=>{try{m(!0);const[y,S,z]=await Promise.all([fetch("https://backend-mywf.onrender.com/api/disfraz/listar",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),fetch("https://backend-mywf.onrender.com/api/etiqueta/listar",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),fetch("https://backend-mywf.onrender.com/api/festividad/festividades",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})]);if(!y.ok||!S.ok||!z.ok)throw new Error("Error al cargar datos iniciales");const[I,$,T]=await Promise.all([y.json(),S.json(),z.json()]);r(I),u(I),l(A($||[])),f(C(T||[])),m(!1)}catch(y){console.error("❌ Error al cargar datos:",y),x("Hubo un problema al cargar la información inicial"),m(!1)}})()},[]),n.useEffect(()=>{if(g.trim()==="")u(s);else{const w=s.filter(y=>{var S,z;return y.nombre.toLowerCase().includes(g.toLowerCase())||((S=y.etiquetas)==null?void 0:S.some(I=>I.nombre.toLowerCase().includes(g.toLowerCase())))||((z=y.festividades)==null?void 0:z.some(I=>I.nombre.toLowerCase().includes(g.toLowerCase())))});u(w)}},[g,s]);const D=w=>{const y=Array.from(w.target.files);if(y.length+o.imagenes.length>3){alert("❌ Solo puedes subir un máximo de 3 imágenes");return}const S=y.map(z=>new Promise(I=>{const $=new FileReader;$.onloadend=()=>{I({file:z,preview:$.result})},$.readAsDataURL(z)}));Promise.all(S).then(z=>{a(I=>({...I,imagenes:[...I.imagenes,...z]}))})},v=w=>{a(y=>{const S=[...y.imagenes];return S.splice(w,1),{...y,imagenes:S}})},N=async()=>{try{const y=o.imagenes.filter($=>$.file).map(async $=>{const T=new FormData;T.append("file",$.file),T.append("upload_preset","megadisfraz");const Q=await fetch("https://api.cloudinary.com/v1_1/dxnnwuzrl/image/upload",{method:"POST",body:T});if(!Q.ok){const ue=await Q.json();throw new Error(ue.message||"Error al subir imagen")}return Q.json()}),z=(await Promise.all(y)).map($=>$.secure_url);return[...o.imagenes.filter($=>!$.file&&($.url||$.preview)).map($=>$.url||$.preview),...z]}catch(w){throw console.error("Error al subir imágenes:",w),w}},k=async w=>{var y,S;try{const I=await(await fetch(`https://backend-mywf.onrender.com/api/disfraz/detalle/${w}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).json(),$=I.imagenes.map(T=>({url:T,preview:T}));a({nombre:I.nombre,descripcion:I.descripcion,festividades:((y=I.festividades)==null?void 0:y.map(T=>T.id))||[],etiquetas:((S=I.etiquetas)==null?void 0:S.map(T=>T.id))||[],imagenes:$}),d(w)}catch(z){console.error("Error al cargar detalles del disfraz:",z),alert("Error al cargar detalles del disfraz")}},F=async w=>{if(window.confirm("¿Estás seguro de que deseas eliminar este disfraz?"))try{if(!(await fetch(`https://backend-mywf.onrender.com/api/disfraz/eliminar/${w}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).ok)throw new Error("Error al eliminar el disfraz");alert("✅ Disfraz eliminado exitosamente");const z=s.filter(I=>I.id!==w);r(z),u(z),d(null),E("")}catch(S){console.error("❌ Error al eliminar el disfraz:",S),alert("❌ Hubo un problema al eliminar el disfraz")}},M=w=>{const{name:y,value:S}=w.target;a(z=>({...z,[y]:S}))},O=w=>{const y=parseInt(w.target.value);if(y===-1){window.location.href="/etiquetas";return}o.etiquetas.includes(y)||(o.etiquetas.length<6?a(S=>({...S,etiquetas:[...S.etiquetas,y]})):alert("❌ Máximo 6 etiquetas permitidas"))},X=w=>{a(y=>({...y,etiquetas:y.etiquetas.filter(S=>S!==w)}))},ce=w=>{const y=parseInt(w.target.value);if(y===-1){window.location.href="/eventos";return}o.festividades.includes(y)||(o.festividades.length<5?a(S=>({...S,festividades:[...S.festividades,y]})):alert("❌ Máximo 5 festividades permitidas"))},de=w=>{a(y=>({...y,festividades:y.festividades.filter(S=>S!==w)}))},me=async w=>{w.preventDefault(),q(!0);try{if(o.imagenes.length===0){alert("❌ Debes tener al menos una imagen"),q(!1);return}if(o.festividades.length===0){alert("❌ Debes seleccionar al menos una festividad"),q(!1);return}if(o.etiquetas.length>6){alert("❌ Máximo 6 etiquetas permitidas"),q(!1);return}if(o.descripcion.length>250){alert("❌ La descripción no puede exceder los 250 caracteres"),q(!1);return}const y=await N(),S={nombre:o.nombre.trim(),descripcion:o.descripcion.trim(),festividades:o.festividades,etiquetas:o.etiquetas,imagenes:y},z=await fetch(`https://backend-mywf.onrender.com/api/disfraz/actualizar/${t}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(S)}),I=await z.json();if(!z.ok)throw new Error(I.msg||"❌ Error al actualizar disfraz");alert("✅ Disfraz actualizado exitosamente");const $=s.map(T=>T.id===t?{...T,...S}:T);r($),u($)}catch(y){console.error("❌ Error al actualizar disfraz:",y),alert(y.message||"❌ Error al actualizar disfraz")}finally{q(!1)}};return p?e.jsxs("div",{className:"form-container",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Cargando datos necesarios..."})]}):b?e.jsxs("div",{className:"form-container",children:[e.jsx("p",{className:"error-message",children:b}),e.jsx("button",{className:"form-button",onClick:()=>window.location.reload(),children:"Reintentar"})]}):e.jsxs("div",{className:"form-container",children:[e.jsx("h2",{className:"titlelistDis",children:"Lista de Disfraces"}),e.jsxs("div",{className:"form-content",children:[e.jsx("label",{htmlFor:"busqueda",children:"Buscar por Nombre, Etiqueta o Festividad:"}),e.jsx("input",{type:"text",id:"busqueda",name:"busqueda",className:"form-input",value:g,onChange:w=>E(w.target.value),placeholder:"Ingrese un nombre, etiqueta o festividad"})]}),e.jsx("ul",{className:"disfraz-list",children:h.map(w=>{var y,S;return e.jsxs("li",{className:"disfraz-item",children:[e.jsxs("div",{className:"disfraz-info",children:[e.jsx("strong",{children:"Nombre:"})," ",w.nombre," ",e.jsx("br",{}),e.jsx("strong",{children:"Etiquetas:"})," ",((y=w.etiquetas)==null?void 0:y.map(z=>z.nombre).join(", "))||"Sin etiquetas",e.jsx("br",{}),e.jsx("strong",{children:"Festividades:"})," ",((S=w.festividades)==null?void 0:S.map(z=>z.nombre).join(", "))||"Sin festividades",e.jsx("br",{})]}),e.jsxs("div",{className:"disfraz-actions",children:[e.jsx("button",{onClick:()=>k(w.id),className:"edit-button2",children:"Editar"}),e.jsx("button",{onClick:()=>F(w.id),className:"delete-button2",children:"Eliminar"})]})]},w.id)})}),t&&e.jsxs("form",{onSubmit:me,className:"form-content",children:[e.jsx("h2",{children:"Editar Disfraz"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"nombre",children:"Nombre:"}),e.jsx("input",{type:"text",id:"nombre",name:"nombre",className:"form-input",value:o.nombre,onChange:M,required:!0,maxLength:100})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"etiquetas",children:"Etiquetas (máx. 6):"}),e.jsxs("select",{id:"etiquetas",name:"etiquetas",className:"form-input1",onChange:O,value:"",children:[e.jsx("option",{value:"",children:"Seleccione una etiqueta"}),c.map(w=>e.jsx("option",{value:w.id,children:w.nombre},w.id)),e.jsx("option",{value:"-1",children:"➕ Crear nueva etiqueta"})]}),e.jsx("ul",{className:"etiquetas-list",children:o.etiquetas.map(w=>{const y=c.find(S=>S.id===w);return e.jsxs("li",{children:[(y==null?void 0:y.nombre)||"Etiqueta desconocida",e.jsx("button",{type:"button",className:"remove-button",onClick:()=>X(w),children:"X"})]},w)})}),e.jsxs("p",{className:o.etiquetas.length>=6?"text-error":"",children:[o.etiquetas.length," / 6 etiquetas seleccionadas"]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"festividad",children:"Festividades (máx. 5):"}),e.jsxs("select",{id:"festividad",name:"festividad",className:"form-input1",onChange:ce,value:"",children:[e.jsx("option",{value:"",children:"Seleccione una festividad"}),i.map(w=>e.jsxs("option",{value:w.id,children:[w.nombre," - ",w.mes,"/",w.dia]},w.id)),e.jsx("option",{value:"-1",children:"➕ Crear nueva festividad"})]}),e.jsx("ul",{className:"festividades-list",children:o.festividades.map(w=>{const y=i.find(S=>S.id===w);return e.jsxs("li",{children:[(y==null?void 0:y.nombre)||"Festividad desconocida",e.jsx("button",{type:"button",className:"remove-button",onClick:()=>de(w),children:"X"})]},w)})}),e.jsxs("p",{className:o.festividades.length>=5?"text-error":"",children:[o.festividades.length," / 5 festividades seleccionadas"]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"descripcion",children:"Descripción (máx. 250 caracteres):"}),e.jsx("textarea",{id:"descripcion",name:"descripcion",className:"form-input1",value:o.descripcion,onChange:M,maxLength:250,required:!0}),e.jsxs("p",{className:o.descripcion.length>=250?"text-error":"",children:[o.descripcion.length," / 250 caracteres",o.descripcion.length>=250&&" (Límite alcanzado)"]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Imágenes (máximo 3):"}),e.jsxs("div",{className:"image-preview-container",children:[o.imagenes.map((w,y)=>e.jsxs("div",{className:"image-box",children:[e.jsx("img",{src:w.preview||w.url,alt:`Preview ${y}`,className:"preview-img"}),e.jsx("button",{type:"button",className:"remove-button",onClick:()=>v(y),"aria-label":"Eliminar imagen",children:"X"})]},y)),o.imagenes.length<3&&e.jsxs("div",{className:"image-box upload-box",children:[e.jsxs("label",{className:"add-image-label",children:["+",e.jsx("input",{type:"file",accept:"image/*",onChange:D,hidden:!0,multiple:!0,"aria-label":"Añadir imagen"})]}),e.jsx("p",{className:"add-image-text",children:"Añadir imagen"})]})]})]}),e.jsx("button",{type:"submit",className:"form-button",disabled:j,children:j?"Actualizando...":"Guardar Cambios"})]})]})},Ve=()=>{const[s,r]=n.useState(null);return e.jsxs("div",{className:"admin-container",children:[e.jsx("h1",{className:"admin-title",children:"Gestión de Disfraces"}),e.jsxs("div",{className:"admin-buttons-container",children:[e.jsx("button",{className:"admin-button button-crear",onClick:()=>r("crear"),children:"Crear Disfraz"}),e.jsx("button",{className:"admin-button button-actualizar",onClick:()=>r("editar"),children:"Editar Disfraz"})]}),e.jsxs("div",{className:"admin-module-container",style:{marginTop:"20px"},children:[s==="crear"&&e.jsx(Ze,{}),s==="editar"&&e.jsx(Ke,{})]})]})},es=()=>{const[s,r]=n.useState({nombre:"",apellido:"",direccion:"",telefono:"",email:"",password:"",rol:"moderador"}),[h,u]=n.useState(""),c=i=>{const{name:f,value:o}=i.target;r({...s,[f]:o})},l=async i=>{i.preventDefault();try{const f=await fetch("https://backend-mywf.onrender.com/api/admin/crear-moderador",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(s)}),o=await f.json();if(!f.ok)throw new Error(o.msg||"Error al crear administrador");u("✅ Administrador creado correctamente"),r({nombre:"",apellido:"",direccion:"",telefono:"",email:"",password:"",rol:"moderador"})}catch(f){u(`❌ ${f.message}`)}};return e.jsx("div",{className:"form-container",children:e.jsxs("form",{onSubmit:l,className:"form-content",children:[e.jsx("h2",{children:"Crear Administrador"}),h&&e.jsx("p",{className:"mensaje",children:h}),["nombre","apellido","direccion","telefono","email","password"].map(i=>e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:i,children:[i.charAt(0).toUpperCase()+i.slice(1),":"]}),e.jsx("input",{type:i==="password"?"password":i==="email"?"email":"text",id:i,name:i,className:"form-input",value:s[i],onChange:c,required:!0})]},i)),e.jsx("button",{type:"submit",className:"form-button",children:"Crear"})]})})},ss=()=>{const[s,r]=n.useState([]),[h,u]=n.useState([]),[c,l]=n.useState(null),[i,f]=n.useState({nombre:"",apellido:"",direccion:"",telefono:"",email:"",contraseña:""}),[o,a]=n.useState("");n.useEffect(()=>{(async()=>{try{const m=await fetch("https://backend-mywf.onrender.com/api/admin/listar-moderadores",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!m.ok)throw new Error("Error al obtener la lista de administradores");const b=await m.json();r(b),u(b)}catch(m){console.error("Error al cargar los administradores:",m),alert("Hubo un problema al cargar los administradores")}})()},[]),n.useEffect(()=>{if(o.trim()==="")u(s);else{const p=s.filter(m=>m.email.toLowerCase().includes(o.toLowerCase()));u(p)}},[o,s]);const t=async p=>{try{const m=await fetch(`https://backend-mywf.onrender.com/api/admin/detalle-moderador/${p}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!m.ok)throw new Error("Error al obtener los detalles del administrador");const b=await m.json();f(b),l(p)}catch(m){console.error("Error al cargar los detalles del administrador:",m),alert("Hubo un problema al cargar los detalles del administrador")}},d=async p=>{if(window.confirm("¿Estás seguro de que deseas eliminar este administrador?"))try{if(!(await fetch(`https://backend-mywf.onrender.com/api/admin/eliminar-moderador/${p}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).ok)throw new Error("Error al eliminar el administrador");alert("Administrador eliminado exitosamente");const x=s.filter(j=>j.id!==p);r(x),u(x),a("")}catch(b){console.error("Error al eliminar el administrador:",b),alert("Hubo un problema al eliminar el administrador")}},g=p=>{const{name:m,value:b}=p.target;f({...i,[m]:b})},E=async p=>{p.preventDefault();try{const m=await fetch(`https://backend-mywf.onrender.com/api/admin/actualizar-moderador/${c}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(i)});if(!m.ok)throw new Error("Error al actualizar el administrador");const b=await m.json();alert("Administrador actualizado exitosamente"),console.log("Administrador actualizado:",b),r(x=>x.map(j=>j.id===c?{...j,...i}:j)),u(x=>x.map(j=>j.id===c?{...j,...i}:j)),l(null)}catch(m){console.error("Error al actualizar el administrador:",m),alert("Hubo un problema al actualizar el administrador")}};return e.jsxs("div",{className:"form-container",children:[e.jsx("h2",{className:"listadmin",children:"Lista de Administradores"}),e.jsxs("div",{className:"form-content",children:[e.jsx("label",{className:"titlebusc",htmlFor:"email",children:"Buscar por Correo Electrónico:"}),e.jsx("input",{type:"email",id:"email",name:"email",className:"form-input",value:o,onChange:p=>a(p.target.value),placeholder:"Ingrese un correo electrónico"})]}),e.jsx("ul",{className:"admin-list",children:h.map(p=>e.jsxs("li",{className:"admin-item",children:[e.jsx("strong",{children:"Nombre:"})," ",p.nombre," ",p.apellido," ",e.jsx("br",{}),e.jsx("strong",{children:"Email:"})," ",p.email," ",e.jsx("br",{}),e.jsx("button",{onClick:()=>t(p.id),className:"edit-button",children:"Editar"}),e.jsx("button",{onClick:()=>d(p.id),className:"delete-button",children:"Eliminar"}),e.jsx("hr",{})]},p.id))}),c&&e.jsxs("form",{onSubmit:E,className:"form-content",children:[e.jsx("h2",{children:"Actualizar Administrador"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"nombre",children:"Nombre:"}),e.jsx("input",{type:"text",id:"nombre",name:"nombre",className:"form-input",value:i.nombre,onChange:g,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"apellido",children:"Apellido:"}),e.jsx("input",{type:"text",id:"apellido",name:"apellido",className:"form-input",value:i.apellido,onChange:g,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"direccion",children:"Dirección:"}),e.jsx("input",{type:"text",id:"direccion",name:"direccion",className:"form-input",value:i.direccion,onChange:g,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"telefono",children:"Teléfono:"}),e.jsx("input",{type:"tel",id:"telefono",name:"telefono",className:"form-input",value:i.telefono,onChange:g,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",children:"Email:"}),e.jsx("input",{type:"email",id:"email",name:"email",className:"form-input",value:i.email,onChange:g,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"contraseña",children:"Contraseña:"}),e.jsx("input",{type:"password",id:"contraseña",name:"contraseña",className:"form-input",value:i.contraseña,onChange:g,required:!0})]}),e.jsx("button",{type:"submit",className:"form-button",children:"Actualizar"})]})]})},as=()=>{const[s,r]=n.useState(null);return e.jsxs("div",{className:"admin-container",children:[e.jsx("h1",{className:"admin-title",children:"Gestión de Administradores"}),e.jsxs("div",{className:"admin-buttons-container",children:[e.jsx("button",{className:"admin-button button-crear",onClick:()=>r("crear"),children:"Crear Administrador"}),e.jsx("button",{className:"admin-button button-actualizar",onClick:()=>r("actualizar"),children:"Actualizar Administrador"})]}),e.jsxs("div",{className:"admin-module-container",children:[s==="crear"&&e.jsx(es,{}),s==="actualizar"&&e.jsx(ss,{})]})]})},rs=()=>{const[s,r]=n.useState({nombre:"",descripcion:""}),h=c=>{const{name:l,value:i}=c.target;r({...s,[l]:i})},u=async c=>{c.preventDefault();try{const l=await fetch("https://backend-mywf.onrender.com/api/etiqueta/crear",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(s)});if(!l.ok)throw new Error("Error al crear la etiqueta");const i=await l.json();alert("✅ Etiqueta creada exitosamente"),console.log("Etiqueta creada:",i),r({nombre:"",descripcion:""})}catch(l){console.error("Error al crear la etiqueta:",l),alert("❌ Hubo un problema al crear la etiqueta")}};return e.jsxs("div",{className:"form-container",children:[e.jsx("h2",{className:"title-crear-etiquetas",children:"Crear Etiqueta"}),e.jsxs("form",{onSubmit:u,className:"form-content",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"nombre",children:"Nombre:"}),e.jsx("input",{type:"text",id:"nombre",name:"nombre",className:"form-input",value:s.nombre,onChange:h,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"descripcion",children:"Descripción:"}),e.jsx("textarea",{id:"descripcion",name:"descripcion",className:"form-input",value:s.descripcion,onChange:h,required:!0})]}),e.jsx("button",{type:"submit",className:"form-button",children:"Crear"})]})]})},ts=()=>{const[s,r]=n.useState([]),[h,u]=n.useState([]),[c,l]=n.useState(""),[i,f]=n.useState({nombre:"",descripcion:""}),[o,a]=n.useState("");n.useEffect(()=>{(async()=>{try{const m=await fetch("https://backend-mywf.onrender.com/api/etiqueta/listar",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!m.ok)throw new Error("Error al obtener las etiquetas");const b=await m.json();r(b),u(b)}catch(m){console.error("Error al cargar las etiquetas:",m),alert("Hubo un problema al cargar las etiquetas")}})()},[]),n.useEffect(()=>{if(o.trim()==="")u(s);else{const p=s.filter(m=>m.nombre.toLowerCase().includes(o.toLowerCase()));u(p)}},[o,s]);const t=p=>{const{name:m,value:b}=p.target;f({...i,[m]:b})},d=p=>{l(p);const m=s.find(b=>b.id===parseInt(p));m&&f({nombre:m.nombre,descripcion:m.descripcion})},g=async p=>{p.preventDefault();try{if(!(await fetch(`https://backend-mywf.onrender.com/api/etiqueta/actualizar/${c}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(i)})).ok)throw new Error("Error al actualizar la etiqueta");alert("✅ Etiqueta actualizada"),r(b=>b.map(x=>x.id===c?{...x,...i}:x)),u(b=>b.map(x=>x.id===c?{...x,...i}:x)),l("")}catch(m){console.error("❌ Error:",m),alert("❌ Hubo un error al actualizar")}},E=async p=>{if(window.confirm("¿Estás seguro de que deseas eliminar esta etiqueta?"))try{if(!(await fetch(`https://backend-mywf.onrender.com/api/etiqueta/eliminar/${p}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).ok)throw new Error("Error al eliminar la etiqueta");alert("Etiqueta eliminada exitosamente");const x=s.filter(j=>j.id!==p);r(x),u(x),a("")}catch(b){console.error("Error al eliminar la etiqueta:",b),alert("Hubo un problema al eliminar la etiqueta")}};return e.jsxs("div",{className:"form-container",children:[e.jsx("h2",{children:"Actualizar Etiquetas"}),e.jsxs("div",{className:"form-content",children:[e.jsx("label",{htmlFor:"nombre",children:"Buscar por Nombre:"}),e.jsx("input",{type:"text",id:"nombre",name:"nombre",className:"form-input",value:o,onChange:p=>a(p.target.value),placeholder:"Ingrese un nombre"})]}),e.jsx("ul",{className:"etiquetas-list",children:h.map(p=>e.jsxs("li",{className:"etiqueta-item",children:[e.jsx("strong",{children:"Nombre:"})," ",p.nombre," ",e.jsx("br",{}),e.jsx("strong",{children:"Descripción:"})," ",p.descripcion," ",e.jsx("br",{}),e.jsx("button",{onClick:()=>d(p.id),className:"edit-button3",children:"Editar"}),e.jsx("button",{onClick:()=>E(p.id),className:"delete-button3",children:"Eliminar"}),e.jsx("hr",{})]},p.id))}),c&&e.jsxs("form",{onSubmit:g,className:"form-content",children:[e.jsx("h2",{children:"Actualizar Etiqueta"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"nombre",children:"Nombre:"}),e.jsx("input",{type:"text",id:"nombre",name:"nombre",className:"form-input",value:i.nombre,onChange:t,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"descripcion",children:"Descripción:"}),e.jsx("textarea",{id:"descripcion",name:"descripcion",className:"form-input",value:i.descripcion,onChange:t,required:!0})]}),e.jsx("button",{type:"submit",className:"form-button",children:"Actualizar"})]})]})},os=()=>{const[s,r]=n.useState(null);return e.jsxs("div",{className:"admin-container",children:[e.jsx("h1",{className:"admin-title",children:"Gestión de Etiquetas"}),e.jsxs("div",{className:"admin-buttons-container",children:[e.jsx("button",{className:"admin-button button-crear",onClick:()=>r("crear"),children:"Crear Etiqueta"}),e.jsx("button",{className:"admin-button button-editar",onClick:()=>r("editar"),children:"Actualizar Etiqueta"})]}),e.jsxs("div",{className:"admin-module-container",style:{marginTop:"20px"},children:[s==="crear"&&e.jsx(rs,{}),s==="editar"&&e.jsx(ts,{})]})]})},V=()=>{const[s,r]=n.useState(!1),[h,u]=n.useState("");return n.useEffect(()=>{const c=localStorage.getItem("token"),l=localStorage.getItem("tipoUsuario");r(!!c),u(l)},[]),s?e.jsx(ne,{to:"/"}):e.jsx("main",{className:"flex justify-center content-center w-full h-screen",children:e.jsx(te,{})})},_=({children:s,allowedRoles:r})=>{const h=localStorage.getItem("token"),u=localStorage.getItem("tipoUsuario");return!h||r&&!r.includes(u)?e.jsx(ne,{to:"/"}):s};function ns(){return e.jsx(Le,{children:e.jsx(ze,{children:e.jsx(Ie,{children:e.jsx(qe,{children:e.jsx("div",{className:"app-container",children:e.jsx("div",{className:"main-content",children:e.jsxs(Ae,{children:[e.jsxs(U,{path:"/",element:e.jsx(Pe,{}),children:[e.jsx(U,{index:!0,element:e.jsx(Ue,{})}),e.jsx(U,{path:"productos/:id",element:e.jsx(Te,{})}),e.jsx(U,{path:"searches",element:e.jsx(We,{})})," ",e.jsx(U,{path:"perfil",element:e.jsx(_,{allowedRoles:["admin","usuario","moderador"],children:e.jsx(He,{})})}),e.jsx(U,{path:"eventos",element:e.jsx(_,{allowedRoles:["admin","moderador"],children:e.jsx(Ye,{})})}),e.jsx(U,{path:"disfraces",element:e.jsx(_,{allowedRoles:["admin","moderador"],children:e.jsx(Ve,{})})}),e.jsx(U,{path:"etiquetas",element:e.jsx(_,{allowedRoles:["admin","moderador"],children:e.jsx(os,{})})}),e.jsx(U,{path:"administradores",element:e.jsx(_,{allowedRoles:["admin"],children:e.jsx(as,{})})})]}),e.jsx(U,{path:"/login",element:e.jsx(V,{}),children:e.jsx(U,{index:!0,element:e.jsx(Be,{})})}),e.jsx(U,{path:"/register",element:e.jsx(V,{}),children:e.jsx(U,{index:!0,element:e.jsx(Oe,{})})}),e.jsx(U,{path:"/confirm/:token",element:e.jsx(Re,{})}),e.jsx(U,{path:"/forgot/id",element:e.jsx(Je,{})}),e.jsx(U,{path:"/recuperar-password/:token",element:e.jsx(_e,{})}),e.jsx(U,{path:"*",element:e.jsx(Ge,{})})]})})})})})})})}De.createRoot(document.getElementById("root")).render(e.jsx(n.StrictMode,{children:e.jsx(ns,{})}));
